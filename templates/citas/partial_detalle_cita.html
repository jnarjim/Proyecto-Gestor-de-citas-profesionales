<div class="max-w-2xl mx-auto bg-white shadow rounded-2xl p-6 mt-6">
    <h2 class="text-2xl font-bold mb-4 text-center">Detalle de la cita</h2>

    <div class="grid grid-cols-2 gap-4">
        <div>
            <p class="font-semibold">Fecha:</p>
            <p>{{ cita.fecha }}</p>
        </div>
        <div>
            <p class="font-semibold">Hora:</p>
            <p>{{ cita.hora }}</p>
        </div>
        <div>
            <p class="font-semibold">Profesional:</p>
            <p>{{ cita.profesional.first_name }} {{ cita.profesional.last_name }}</p>
        </div>
        <div>
            <p class="font-semibold">Cliente:</p>
            <p>
                {% if cita.cliente %}
                    {{ cita.cliente.first_name }} {{ cita.cliente.last_name }}
                {% else %}
                    <span class="text-gray-500 italic">No asignado</span>
                {% endif %}
            </p>
        </div>
        <div class="col-span-2">
            <p class="font-semibold">Estado:</p>
            <p class="capitalize">{{ cita.estado }}</p>
        </div>
    </div>

    <div class="mt-6 text-center space-x-3">
        {% if user.is_professional %}
            {% if cita.estado == "confirmada" %}
                <button
                    hx-post="{% url 'completar_cita' cita.id %}"
                    hx-swap="outerHTML"
                    class="bg-green-500 text-white px-4 py-2 rounded-xl hover:bg-green-600 transition">
                    Marcar como completada
                </button>
            {% endif %}
            {% if cita.estado != "cancelada" %}
                <button
                    hx-post="{% url 'cancelar_cita' cita.id %}"
                    hx-swap="outerHTML"
                    class="bg-red-500 text-white px-4 py-2 rounded-xl hover:bg-red-600 transition">
                    Cancelar
                </button>
            {% endif %}
        {% else %}
            {% if cita.estado == "pendiente" %}
                <button
                    hx-post="{% url 'reservar_cita' cita.id %}"
                    hx-swap="outerHTML"
                    class="bg-blue-500 text-white px-4 py-2 rounded-xl hover:bg-blue-600 transition">
                    Reservar cita
                </button>
            {% elif cita.estado == "confirmada" %}
                <button
                    hx-post="{% url 'cancelar_cita' cita.id %}"
                    hx-swap="outerHTML"
                    class="bg-yellow-500 text-white px-4 py-2 rounded-xl hover:bg-yellow-600 transition">
                    Cancelar cita
                </button>
            {% endif %}
        {% endif %}
    </div>
</div>