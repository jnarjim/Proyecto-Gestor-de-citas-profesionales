{% extends "base.html" %}
{% load static %}

{% block content %}
<div x-data="solicitudProfesional()" x-init="init()" class="p-6 max-w-lg mx-auto">
    <h2 class="text-xl font-bold mb-4">Solicitar cuenta de profesional</h2>

    <!-- Mensajes -->
    <template x-if="mensaje">
        <div class="mb-4 p-2 border rounded bg-green-100 text-green-800" x-text="mensaje"></div>
    </template>

    <template x-if="error">
        <div class="mb-4 p-2 border rounded bg-red-100 text-red-800" x-text="error"></div>
    </template>

    <!-- Formulario: ocultar si ya hay solicitud -->
    <template x-if="!solicitud">
        <form @submit.prevent="enviarSolicitud">
            <div class="mb-4">
                <label class="block mb-1 font-semibold" for="acepta">¿Permitir que citas canceladas se vuelvan a reservar?</label>
                <input type="checkbox" id="acepta" x-model="aceptaReapertura">
            </div>

            <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                Enviar solicitud
            </button>
        </form>
    </template>

    <!-- Estado de solicitud existente -->
    <template x-if="solicitud">
        <div class="mt-6 p-4 border rounded bg-gray-50">
            <p><strong>Estado de tu solicitud:</strong> <span x-text="solicitud.estado"></span></p>
            <p><strong>Acepta reapertura de citas:</strong> <span x-text="solicitud.acepta_reapertura_citas ? 'Sí' : 'No'"></span></p>
            <p><strong>Enviada el:</strong> <span x-text="solicitud.creada_en"></span></p>
        </div>
    </template>
</div>

<script src="{% static 'js/solicitud_profesional.js' %}"></script>
{% endblock %}